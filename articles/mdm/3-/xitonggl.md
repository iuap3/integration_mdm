# 系统管理

主数据管理需要的一些系统管理功能，例如：系统服务、业务系统的注册管理，动态节点，以及系统运行日志等。

## 系统服务注册

点击【主数据管理】→【系统管理】→【系统服务注册】，进入系统服务注册页面。

主数据管理的系统服务包括：主数据管理自己发布的服务以及外部业务系统发布的服务。

主数据管理统一定义了业务系统接入主数据管理的WEB服务标准规范。可以查看各服务的WSDL标准规范。

● 新增

单击〖新增〗，弹出窗口，输入相关内容：

→ 编码：系统服务编码；

→ 名称：系统服务名称；

→ 访问地址：业务系统提供的WEB服务地址；

→ 备注。

单击〖确认〗保存。

![](/articles/mdm/3-/images/image99.png)

图：系统服务注册

● 修改

单击〖修改〗，弹出窗口，修改相关内容，单击〖确认〗保存。

● 删除

单击〖删除〗，会弹出删除确认框，单击〖是〗。如果该服务正被业务系统引用，则不能删除，会弹出如下相关提示框。

![](/articles/mdm/3-/images/image100.png)

图：错误提示框

## 远程系统注册

点击【主数据管理】→【系统管理】→【业务系统注册】，进入业务系统注册页面。

主数据管理的远程系统包括：主数据的采集系统以及分发系统。它们需要注册，被主数据管理统一进行管理。

每个远程系统需要指定一个系统服务。

● 新增

单击〖新增〗，弹出窗口，输入相关内容：

→ 远程系统编码；

→ 远程系统名称；

→ 勾选邮件通知；

→ 填写收件人

→ 备注。

单击〖确认〗保存。

![](/articles/mdm/3-/images/image101.png)

图：业务系统注册

● 修改

单击〖修改〗，弹出窗口，修改相关内容，单击〖确认〗保存。

● 删除

单击〖删除〗，会弹出删除确认框，单击〖是〗。如果远程系统已被其他的系统模块引用，则不能删除，会弹出如下相关提示框。

![](/articles/mdm/3-/images/image102.png)

图：错误提示框

## 动态节点

点击【主数据管理】→【系统管理】→【动态节点】，进入动态节点页面，在该页面里，左边是主数据分类树，右边是操作区域。

通过【主数据管理】→【主数据建模】→【主数据定义】完成的主数据模型，需要发布主数据的动态节点。成功发布后的主数据动态节点，会显示在【主数据】下，普通用户可能看到主数据管理系统中发布后的主数据；反发布主数据动态节点，则不会在【主数据】下显示。

● 发布节点

单击某一分类下的某个主数据，单击〖发布〗，选择菜单分类及菜单所属目录，单击〖确认〗。

![](/articles/mdm/3-/images/image103.png)

图：发布节点

如果勾选“是否只读”，则发布的节点是只读的，不能进行增加、修改、删除等操作。

● 反发布节点

单击某一分类下的某个主数据，单击〖反发布〗。

会弹出如下相关提示框：

![](/articles/mdm/3-/images/image104.png)

图：反发布节点

## 用户权限

用户权限是为选定的用户增加访问数据的权限设置，粒度到行，通过条件编辑可以控制某一类角色的用户可访问主数据的符合条件编辑的数据行。

点击【主数据管理】→【系统管理】→【用户权限】，进入节点页面，在该页面里，左边是主数据分类树，右边是对每个主数据下的用户权限的设置管理。

● 新增

单击分类树下的某个档案分类，单击〖新增〗，在弹出窗口填入相应内容：名称（必输项）、编码（必输项），单击用户角色右侧选择框选择角色（必输项）和条件等内容，如下图：

![](/articles/mdm/3-/images/image105.png)

图：新增权限

单击“条件”输入框下边的“条件编辑”按钮，进入条件编辑页面，在候选条件栏选择条件移至普通条件栏，如下图：

![](/articles/mdm/3-/images/image106.png)

图：条件编辑

单击〖确认〗，完成新增权限。

● 修改

在权限列表选取一条数据，单击〖修改〗，弹出窗口，修改相关内容，单击〖确认〗保存。

● 删除

在权限列表选取一条数据，单击〖删除〗，会弹出删除确认框，单击〖是〗。

![](/articles/mdm/3-/images/image107.png)

图：删除权限

## 扩展接口

扩展接口是指可以在主数据系统与远程系统之间接收或发送数据前可以在相应的数据处理类里对数据进行自定义的处理。

点击【主数据管理】→【系统管理】→【扩展接口】，进入节点页面，在该页面里，左边是主数据分类树，右边是默认接口详情及对应的数据处理类，包括以下三类：

● 主数据定义接口

该接口为用户提供在主数据执行持久化动作之前或之后的其他操作的切入点。

使用说明：

1) 创建接口的实现类

2) 选中主数据，在数据处理类中配置接口实现类路径

![](/articles/mdm/3-/images/image108.png)

图：主数据定义接口

● 远程系统数据接口

该接口为用户提供在外部系统执行数据库新增动作之前或之后的其他操作的切入点。

使用说明：

1) 创建接口的实现类；

2) 选中主数据和相应的业务系统，并在数据处理类中配置接口实现类路径；

3) 可以配置一个或者多个实现。

点击右下角的“新增”按钮，在弹出界面填写对应项“业务系统”和“数据处理类”，即可增加新的“业务系统数据处理接口”，如下图：

![](/articles/mdm/3-/images/image109.png)

图：增加业务系统数据处理接口

同时，选择任何一个“业务系统数据处理接口”项，也可通过右下角的按钮进行“修改”或“删除”。

● 唯一性校验接口

该接口为用户提供自定义主数据唯一性检查的方式。

使用说明：

1) 创建接口的实现类；

2) 选中主数据和相应的业务系统，并在数据处理类中配置接口实现类路径；

3) 可以配置一个或者多个实现。

点击右下角的“新增”按钮，在弹出界面填写对应项“业务系统”和“数据处理类“，即可增加新的“唯一性校验接口”，如下图：

![](/articles/mdm/3-/images/image110.png)

图：增加唯一性校验接口

同时，选择任何一个“业务系统数据处理接口”项，也可通过右下角的按钮进行“修改”或“删除”。

**页面可以配置以下四类扩展接口**

1) 通过服务的方式，业务系统数据新增或变更到主数据系统中，扩展接口可加工抓取的数据。 不区别服务的调用方式：业务系统调用主数据WebService、主数据系统主动抓取。

2) 通过服务的方式，主数据分发到业务系统，扩展接口加工待分发的数据。 不区别服务的调用方式：业务系统调用主数据WebService、主数据系统主动推送。

3) 在主数据系统内部申请主数据、变更主数据，扩展接口可加工用户在页面填写的数据。

4) 主数据装载的唯一性检查扩展接口，与实体唯一性属性共同作用，判定唯一数据。

## 算法库

算法库是为模糊排重准备的一系列算法。系统默认有完全匹配、同音匹配、全半角匹配、简繁体匹配、模糊匹配五种匹配算法，也可自定义算法。

点击【主数据管理】→【系统管理】→【算法库】，进入节点页面，如下图：

![](/articles/mdm/3-/images/image111.png)

图：算法库

● 新增

单击界面左上角的〖新增〗，在弹出窗口填入相应内容：编码（必输项）、名称（必输项）、实现类全名，如下图：

![](/articles/mdm/3-/images/image112.png)

图：新增算法

单击〖确认〗，完成新增算法。

● 修改

在算法列表选择一条数据，单击〖修改〗，在弹出窗口修改相应内容：编码、名称、实现类全名，

单击〖确认〗，完成新增算法。

**注意：不能选择系统默认算法进行修改**。

● 删除

在算法列表选择一条数据，单击〖删除〗，选择〖是〗，完成删除算法。

**注意：不能删除系统默认算法**。

● 查看

在算法列表选择一条数据，单击〖查看〗，可以查看算法相关信息。

![](/articles/mdm/3-/images/image113.png)

图：查看算法

1) 编码： 算法标识。

2) 名称： 算法的名称。

3) 是否系统默认：可选项，选择是否是系统默认算法。

4) 是否精确匹配：选择算法是否是精确匹配。

5) 实现类全名：算法实现类的名称。

## 系统参数

系统参数可对主数据管理系统的参数进行修改配置。

点击【主数据管理】→【系统管理】→【系统参数】，进入节点页面，如下图：

![](/articles/mdm/3-/images/image114.png)

图：系统参数

→ 装载分发批次大小：设置分发接口实现分页/分批机制，可选参数值为100、500、1000、1500、2000。；

→ 查重批次大小：设置查重批次大小数量，可选参数值为100、200、500、1000；

→ 查重并行线程数量：设置查重并行线程数量，可选参数值为2、4、6、8、10；

→ 查重结果数量上限：设置查重结果数量上限，可选参数值为2、4、6、8、10、12；

→ 是否记录Web服务数据：设置是或否；

→ 邮件设置：设置邮件发送服务器、邮件接收服务器、用户名、密码、发送人邮箱地址，给业务系统下发数据变更通知。

## 系统日志

点击【主数据管理】→【系统管理】→【系统日志】，进入系统日志页面。页面左边是常用查询以及高级查询，右边是日志列表。

![](/articles/mdm/3-/images/image115.png)

图：系统日志

主数据管理的系统日志的级别分为调试，消息，警告，错误四种。

常用查询条件：日志级别，创建日期。

系统日志列表显示列：

1) 日志级别：四种日志级别的一种；

2) 详细信息：日志的详细信息；

3) 用户信息：创建日志的用户名；

4) 创建日期：创建日志的日期时间。

![](/articles/mdm/3-/images/image116.png)

图：系统日志列表

