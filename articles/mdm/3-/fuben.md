# 副本

副本，是一种主数据加载的来源方式。

主要包括副本建模、副本对照、副本查看、副本稽查、副本日志。

## 副本建模

副本建模，选择业务系统，新增副本模型。副本表归属于远程系统注册的业务系统。

点击【主数据管理】→【副本】→【副本建模】，进入副本建模页面，在该页面里，左边是副本表的分类树，右边是对副本模型的新增，修改，删除等管理。

●
 新增\(模型\)

单击副本表分类树的根节点“业务系统”，单击〖新增〗，弹出一个窗口，填写相应内容（\|表示必填项）后，单击〖确定〗。

→ 字段属性，包括：

1\) 字段编码:唯一的英文编码标示，必输项；

2\) 字段名称:中文属性名称，必输项；

3\) 类型：副本表数据类型。包括：字符、整型、浮点型、布尔、日期、日期时间、大文本；

4\) 字段长度：副本表数据类型的数据宽度，大于1；

5\) 备注：对该字段的描述。

→ 副本表字段，默认5个字段：

1\) MDM\_CODE：主数据编码，唯一标识；

2\) ID：业务数据ID：针对于业务系统唯一表示，必输项；

3\) 业务系统：业务系统编码，必输项；

4\) 数据状态：“1”，该数据为新数据；“2”，该数据已发起；

5\) 移除标记：该数据是否移除出副本表查看列表，Y是N否。

→ 对副本表字段可进行操作，默认字段不可修改：

1\) 增行：单击〖增行〗，增加新的副本表字段；

2\) 删行：单击〖删行〗，增加新的副本表字段；

3\) 上移：选中字段，单击〖上移〗，该字段上移；

4\) 下移：选中字段，单击〖下移〗，该字段下移。

![](/articles/mdm/3-/images/image117.png)

图：新增副本表模型

●
 生成副本表

选中副本模型，单击〖生成副本表〗，生成副本表\(物理表\)。

●
 修改

单击分类树下的某个副本表，单击〖修改〗，弹出一个窗口，填写相应内容（\|表示必填项）后，单击〖确定〗。默认字段不可修改。

![](/articles/mdm/3-/images/image118.png)

图：修改副本表

●
 删除

单击分类树下的某个副本表分类，单击〖删除〗，弹出确认提示框，单击〖确定〗。

![](/articles/mdm/3-/images/image119.png)

图：删除副本表

## 副本对照

副本对照，通过配置对照关系或实现转换接口，以实现副本与主数据之间数据转换。

点击【主数据管理】→【副本】→【副本对照】，进入副本对照页面。页面左边是常主数据分类树，右边是副本对照关系列表，包括新增，修改，删除等管理。

●
 新增

配置副本表对应主数据实体。

单击分类树下的某个主数据，单击〖新增〗，弹出一个窗口，填写相应内容（\|表示必填项）后，单击〖确定〗。

→ 基本信息：编码、名称、业务系统、对照类型（接口、对照）、接口。

对照，配置副本表与主数据实体，可实现简单对照关系。

接口，配置实现类路径，通过接口代码，实现复杂对照关系。

→ 副本表与实体：副本表、主数据实体、主子类型。

![](/articles/mdm/3-/images/image120.png)

图：新增副本对照

● 对照

选中对照配置，单击〖对照〗，生成副本对照关系。

![](/articles/mdm/3-/images/image121.png)

图：生成副本对照

● 修改

单击某个对照关系，单击〖修改〗，弹出一个窗口，填写相应内容（\|表示必填项）后，单击〖确定〗。

![](/articles/mdm/3-/images/image122.png)

图：修改副本对照

● 删除

单击某个对照关系，单击〖删除〗，弹出确认提示框，单击〖确定〗。

![](/articles/mdm/3-/images/image119.png)

图：删除副本表

## 副本查看

副本查看，可查看副本表数据，并可以依据副本对照关系，采取人工或自动方式，转换为对应主数据数据。

点击【主数据管理】→【副本】→【副本查看】，进入副本查看页面。页面左边是副本表分类树，右边是副本表数据列表。

● 发起

将数据依据副本对照关系，转换成对应主数据数据。

→ 人工干预

由管理员指派消息接受者，处理副本表数据转换成主数据。

1\) 选中副本表数据，可选择多条；

2\) 选择指派消息接受者；

3\) 选择副本对照关系；

4\) 单击〖发起〗。

![](/articles/mdm/3-/images/image123.png)

图：发起——人工干预

→ 后台任务发起

新增后台任务部署，由系统筛选数据，通知指定用户处理数据。

点击【客户化设置】→【后台任务中心】→【后台任务部署】，进入后台任务部署页面。

![](/articles/mdm/3-/images/image124.png)

图：发起——后台任务部署

单击〖新增〗，弹出任务条目部署窗口。填写相应内容（\|表示必填项）后，单击〖确定〗。

1） 后台任务定义

填写条目基本信息，包括条目名称、描述、条目状态（激活\/休眠）、条目信息。

![](/articles/mdm/3-/images/image125.png)

图：任务条目部署——后台任务定义

2） 参数设置

设置任务参数。类型选择“副本数据后台任务发起”。配置“用户编码”、“副本对照编码”，用于设置用户接收处理任务。

![](/articles/mdm/3-/images/image126.png)

图：任务条目部署——参数设置

3） 触发设置

设置任务触发条件。

执行策略，定时策略，设置立即执行\/定时。

![](/articles/mdm/3-/images/image127.png)

图：任务条目部署——触发设置

4） 消息接收配置

设置是否接收消息推送、接收消息用户及消息推送方式。

![](/articles/mdm/3-/images/image128.png)

图：任务条目部署——消息接收设置

→ 后台任务同步

新增后台任务部署，由系统筛选数据，系统后台自动转换数据。

点击【客户化设置】→【后台任务中心】→【后台任务部署】，进入后台任务部署页面。

![](/articles/mdm/3-/images/image170.png)

图：发起——后台任务部署

单击〖新增〗，弹出任务条目部署窗口。填写相应内容（\|表示必填项）后，单击〖确定〗。

1) 后台任务定义

填写条目基本信息，包括条目名称、描述、条目状态（激活\/休眠）、条目信息。

2) 参数设置

设置任务参数。类型选择“副本数据同步到主数据”。配置“副本对照编码”，系统后台自动完成对照主数据。

3) 触发设置

设置任务触发条件。

执行策略，定时策略，设置立即执行\/定时。

4) 消息接收配置

设置是否接收消息推送、接收消息用户及消息推送方式。

● 增量

根据副本表数据字段，”数据状态”，筛选数据列表。

单击〖增量〗，列表刷新，显示新数据（未发起的数据）列表。

![](/articles/mdm/3-/images/image129.png)

图：增量

● 全量

显示副本表所有数据列表。

单击〖全量〗，列表刷新，显示所有数据列表，包含新数据、已发起数据。

![](/articles/mdm/3-/images/image130.png)

图：全量

● 移除

根据副本表数据字段，”移除标记”，移除杂乱数据。移除的数据只是在列表中无法查看，仍存留在数据库中。

Y为移除，N为保留。可勾选多条数据。

勾选数据，单击〖移除〗，列表刷新。

![](/articles/mdm/3-/images/image131.png)

图：移除

● 过滤

管理员可根据查询条件，恢复用户移除的数据。

单击〖过滤〗，勾选待选条件，单击〖确定〗，恢复数据列表。

![](/articles/mdm/3-/images/image132.png)

图：过滤

## 副本稽查

副本稽查，查看主数据对应副本表数据的差异性。

点击【主数据管理】→【副本】→【副本稽查】，进入副本稽查页面。页面左边是常主数据分类树，右边是主数据列表。

● 稽查

查看主数据与其副本的映射关系。一个主数据可对应多个副本表。

1） 选中主数据信息，单击〖稽查〗，弹出“副本列表”窗口。

![](/articles/mdm/3-/images/image133.png)

图：副本列表

2） 选中副本表，单击〖详细信息〗，弹出“稽查”窗口。

![](/articles/mdm/3-/images/image134.png)

图：稽查窗口

● 高级查询

根据条件，筛选主数据列表。

1） 单击〖高级查询〗，弹出“高级查询”窗口。

![](/articles/mdm/3-/images/image135.png)

图：高级查询窗口

2） 从左侧“候选条件”，选择条件，单击

![](/articles/mdm/3-/images/image136.png)

按钮，将条件添加至右侧“普通条件”列表。

3） 单击〖确定〗，筛选主数据信息。

## 副本日志

副本日志，查看【副本】节点的操作记录。

点击【主数据管理】→【副本】→【副本日志】，进入副本日志页面。页面左边是快速查询条件窗口，右上方是副本日志列表，右下方是副本日志子表。

![](/articles/mdm/3-/images/image137.png)

图：副本日志

副本日志列表，包含字段：操作类型、操作状态、操作副本、业务系统、操作用户、操作时间、操作结果备注。

副本日志子表，包含字段：主数据编码、操作状态、副本业务id、操作结果备注。

● 快速查询

根据操作类型和操作状态，筛选日志列表。

→ 操作类型

1) 生成副本表

用户进行副本建模，生成副本表。

2) 人工干预

指定用户，将副本数据转换成主数据。

3) 后台任务同步

设置后台任务，根据指定条件，筛选任务分配用户处理副本数据转换。

4) 后台任务发起

设置后台任务，由系统自动处理副本数据转换。

5) 页面发起

【副本查看】，配置发起，指定处理任务的用户。

→ 操作状态

1) 成功：日志操作成功。

2) 失败：日志操作失败。

